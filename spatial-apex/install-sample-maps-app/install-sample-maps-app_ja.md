# サンプル・マップ・アプリケーションのインストール

## 概要

Oracle APEXは、特定の機能領域を強調表示するサンプル・アプリケーションのポートフォリオへのアクセスを提供します。これらの中には、Oracle APEXのマッピング機能を示すサンプル・マップ・アプリケーションがあります。さらなるカスタマイズのための機能例および開始点として機能する様々な例が提供されています。この演習では、Sample Mapsアプリケーションをインストールして構成します。

推定ラボ時間: 15分

### 目標

*   サンプル・マップ・アプリケーションをインストールします
*   サポート・データのロード

### 前提条件

*   Oracle APEX 21.1以上が必要です。このワークショップのスクリーンショットは、APEX 21.2を使用して撮影されます。通常、[最新バージョンのAPEX](https://www.oracle.com/tools/downloads/apex-downloads/)を使用することをお薦めしますので、ユーザー・インタフェースにわずかな違いが生じることがあります。

## タスク1: アプリケーションのインストール

1.  まず、**「アプリケーション・ビルダー」**をクリックします。
    
    ![APEX Application Builder](images/install-sample-maps-00.png)
    
2.  **「スタータまたはサンプル・アプリケーションのインストール」**をクリックします。
    
    ![スタータまたはサンプル・アプリケーションの選択](images/install-sample-maps-01.png)
    
    **ノート:**ワークスペースに既存のアプリケーションがある場合は、**「作成」**、**「スタータ・アプリケーション」**の順にクリックします。
    
3.  **「サンプル」**をクリックして、使用可能なサンプル・アプリケーションのリストを含む新しいブラウザ・タブを開きます。
    
    ![サンプルを選択](images/install-sample-maps-02.png)
    
4.  **「サンプル・マップ」**まで下にスクロールし、**「アプリケーションのダウンロード」**をクリックします。
    
    ![イメージ代替テキスト](images/install-sample-maps-03.png)
    
    アプリケーション・バンドルをローカル・フォルダに保存するように求められます。
    
    **ノート:** githubにリダイレクトされる場合は、APEXバージョンのフォルダに移動し、**sample-maps.zip**をダウンロードします。
    
5.  アプリケーション・ビルダーのブラウザ・タブに戻り、**「インポート」**をクリックします。
    
    ![インポートの選択](images/install-sample-maps-04.png)
    
6.  前にダウンロードしたSample Mapsアプリケーションのzipファイルにドラッグ・アンド・ドロップするか参照します。「ファイル・タイプ」の選択は「データベース・アプリケーション」のままにして、**「次へ」**をクリックします。
    
    ![サンプル・マップ・アプリケーションzipの選択](images/install-sample-maps-05.png)
    
7.  ファイルのインポートが確認されました。**「次へ」**を再度クリックします。
    
    ![「次へ」をクリックします。](images/install-sample-maps-06.png)
    
8.  デフォルトのメニュー選択のままにして、**「アプリケーションのインストール」**をクリックします。
    
    ![「アプリケーションのインストール」をクリックします](images/install-sample-maps-07.png)
    
    これにより、アプリケーションのインストール・ウィザードに移動します。
    
9.  デフォルトのメニュー選択のままにして、**「次へ」**をクリックします。
    
    ![「次へ」をクリックします。](images/install-sample-maps-08.png)
    
10.  **「次へ」**をクリックして、システムの互換性を検証します。
    

![「次へ」をクリックします。](images/install-sample-maps-09.png)

11.  互換性を確認したら、**「インストール」**をクリックして、サポートするデータベース・オブジェクトおよびAPEXアプリケーションのインストールを開始します。

![「インストール」をクリックします](images/install-sample-maps-10.png)

12.  インストールが完了したら、**「アプリケーションの実行」**をクリックします。

![「Run Application」をクリックします。](images/install-sample-maps-11.png)

13.  APEXワークスペースのユーザー名とパスワードを使用して、Sample Mapsアプリケーションにサインインします。

![ログイン](images/install-sample-maps-12.png)

## タスク2: データのロード

1.  これで、APEXでのマップおよび空間操作の例を数多く示すサンプル・マップ・アプリケーションが表示されました。初期起動時に、データのロードに関する警告メッセージが表示されます。そのメッセージ内の**「データ・ロード」**リンクをクリックします。デモ・データのロードが完了したページに移動します。
    
    ![「データのロード」をクリックします。](images/install-sample-maps-13.png)
    
2.  「データのロード」ページには、Sample Mapsアプリケーションおよびこのワークショップの残りの部分で使用される州および空港のデータセットのロード・ステータスが表示されます。Sample Mapsアプリケーションのインストール時に、これらのデータセットは一部のみロードされます。サンプル・データのロードを完了するには、githubに格納されているファイルから直接ロードするか、まずファイルをダウンロードしてローカル・システムからロードします。githubへのアクセスにプロキシが必要なネットワークでAPEXを実行している場合は、後者のオプションを使用する必要があります。
    
    APEXインスタンスがgithubにアクセスするためにプロキシを必要としない場合(たとえば、APEX.oracle.comまたはAPEXのOracle Autonomous Databaseの場合)、ボタンをクリックして**「GitHubから直接」**をロードし、右上の**「データセットのロード」**をクリックします。
    
    ![Githubから直接クリック](images/install-sample-maps-14.png)
    
    APEXインスタンスでgithubにアクセスするためにプロキシが必要な場合(たとえば、企業のファイアウォールの背後で実行されているAPEX)、またはgithubから直接ロードする他の問題がある場合は、代替の手順を提供する**「ファイルのアップロード」**ボタンをクリックします。
    
3.  データのロードが完了すると、右上に通知が表示され、警告メッセージは表示されなくなります。サンプル・マップ・アプリケーションを使用する準備ができました。
    
    ![データ・ロード確認](images/install-sample-maps-15.png)
    

## タスク3: サンプル・マップ・アプリケーションの確認

1.  いずれかのタイルをクリックすると、アプリケーションの関連ページにナビゲートします。例として、**「マップおよびレポート」**をクリックします。
    
    ![マップ/レポート ページに移動します。](images/install-sample-maps-16.png)
    
2.  このページでは、マップ内の項目の右中央にあるレポートの項目をクリックし、情報ウィンドウを開きます。左上隅のアイコンをクリックすると、アプリケーションの他のページにアクセスするためのナビゲーション・パネルが開きます。
    
    ![マップとの対話](images/install-sample-maps-17.png)
    
3.  ナビゲーションパネルの項目をクリックして、アプリケーションのほかのページにアクセスします。
    
    ![ナビゲーションパネルにほかのページが表示される](images/install-sample-maps-18.png)
    
4.  ナビゲーションパネルを閉じるには、左上のアイコンをクリックします。左上の**「サンプル・マップ」**をクリックして、アプリケーションのホームページに移動することもできます。
    
    ![ナビゲーション・パネルを閉じます](images/install-sample-maps-19.png)
    

## タスク4: デモ・データの確認

1.  APEXに戻り、**「SQLワークショップ」**、**「オブジェクト・ブラウザ」**の順にクリックします。
    
    ![SQLワークショップ- オブジェクト・ブラウザ](images/install-sample-maps-20.png)
    
2.  前に実行したデータ・ロード・ステップによって作成された表を確認します。**EBA\_SAMPLE\_MAP\_AIRPORTS**をクリックします。列に、SDO\_GEOMETRY型(Oracleのネイティブ空間データ型)を持つGEOMETRYという名前の列が含まれていることを確認します。
    
    ![ネイティブ・ジオメトリ列を含む表](images/install-sample-maps-21.png)
    
3.  **「データ」**タブをクリックし、表の内容を表示します。
    
    ![表の内容](images/install-sample-maps-22.png)
    
    次に、右にスクロールしてジオメトリ列を表示します。空港はポイントとして格納されるため、APEXにはポイント・ジオメトリ値の文字列表現が表示されます。ポイントは常に単一の座標に基づいているため、APEXがこの方法で値を表示することは理にかなっています。
    
    ![点ジオメトリ](images/install-sample-maps-23.png)
    
4.  **EBA\_SAMPLE\_MAP\_SIMPLE\_STATES**をクリックします。また、列には、SDO\_GEOMETRY型(Oracleのネイティブ空間データ型)を持つGEOMETRYという名前の列が含まれていることを確認します。
    
    ![ネイティブ・ジオメトリ列を含む表](images/install-sample-maps-24.png)
    
5.  **「データ」**タブをクリックして、表の内容を表示します。この表は州を格納するため、ジオメトリはポリゴンです。APEXでは、非常に長い座標セットが含まれている可能性があるため、これらの値の文字列表現は表示されません。
    
    ![ポリゴン・ジオメトリ](images/install-sample-maps-25.png)
    
6.  **MDRT\_....$**のような名前の表を確認します。これらは、データベースによってバックグラウンドで自動的に作成および管理され、他の表の空間索引をサポートします。これらの表を手動で作成、更新または削除することはありません。これらは空間分析操作のみをサポートし、無視できます。
    
    ![空間索引アーティファクト](images/install-sample-maps-26.png)
    
7.  最後に、このデータを使用して基本的な空間問合せを実行できます。**「SQLワークショップ」**、**「SQLコマンド」**の順にクリックします。
    
    ![SQLワークショップ- SQLコマンド](images/install-sample-maps-27.png)
    
8.  次の問合せは、テキサス州から100km以内の土地面積が1000エーカーを超える空港の数を返します。ネイティブ空間演算子**sdo\_within\_distance**の使用に注意してください。問合せをコピーして「SQLコマンド」ウィンドウに貼り付け、右上の**「実行」**をクリックします。
    
        <copy>
        select count(a.id) as number_of_airports
        from EBA_SAMPLE_MAP_AIRPORTS a,
              EBA_SAMPLE_MAP_SIMPLE_STATES b
        where b.state_code= 'TX'
           and land_area_covered > 1000
           and sdo_within_distance(a.geometry, b.geometry, 'distance=100 unit=KM') = 'TRUE'
        </copy>
        
    
    ![空間問合せ](images/install-sample-maps-28.png)
    
9.  sdo\_within\_distance演算子で、距離を300kmに更新して再実行します。大きい検索領域に基づいた結果の変更を確認します。
    
    ![空間問合せ](images/install-sample-maps-29.png)
    

後の演習では、ページのメニューによって状態と距離が制御されるこの問合せの結果を表示するマップを構成します。

これで、Sample Mapsアプリケーションとデータをインストールして調査しました。次に、独自のアプリケーションおよびマップの作成を開始します。

これでラボは終了です。次の演習に進むことができます。

## 謝辞

*   **著者** - Oracle、データベース製品管理、David Lapp氏
*   **貢献者** - Carsten Czarski、APEX開発、Oracle
*   **最終更新者/日付** - Database Product Management、David Lapp、2023年3月